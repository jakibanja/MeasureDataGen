measure_name: SMD
description: Diabetes Screening for People With Schizophrenia or Bipolar Disorder Who Are Using Antipsychotic Medications
rules:
  age_range:
  - 18
  - 64
  age_as_of: December 31
  anchor_date_type: calendar_end
  continuous_enrollment:
    period_months: 12
    allowable_gap_days: 45
    no_gap_on_last_day: true
  initial_population:
  - event: Outpatient Visit
    value_set_names:
    - Outpatient POS
    table: visit
  exclusions:
  - name: Hospice
    value_set_names:
    - Hospice Encounter
    - Hospice Intervention
  - name: Death
    criteria: Death during measurement period
  clinical_events:
    # Step 1: Identify persons with Schizophrenia (Denominator Criteria)
    denominator_components:
    - name: Schizophrenia Diagnosis
      table: visit
      value_set_names:
      - Schizophrenia
      count: 2
      min_separation_days: 1
      description: "At least two visits with schizophrenia diagnosis on different dates"
    # Step 2: Identify persons with Diabetes (Additional Denominator Criteria)
    - name: Diabetes Diagnosis
      table: visit
      value_set_names:
      - Diabetes
      count: 2
      min_separation_days: 1
      description: "At least two diabetes diagnoses on different dates during MY or prior year"
    - name: Diabetes Medication
      table: rx
      value_set_names:
      - Diabetes
      count: 1
      description: "Optional: At least one diabetes medication dispensing event (if using pharmacy data pathway)"
    # Numerator: What the patient should receive
    numerator_components:
    - name: HbA1c Test
      table: lab
      value_set_names:
      - HbA1c Lab Test
    - name: LDL-C Test
      table: lab
      value_set_names:
      - LDL C Lab Test
    logic_pathways: []
